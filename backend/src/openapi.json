{
  "openapi": "3.0.3",
  "info": {
    "title": "Lecturer Contract Generation System API",
    "description": "API documentation for Lecturer Contract Generation System: authentication, recruitment candidates, interview questions, lecturers, courses, classes, course mappings, onboarding, catalog, dashboard, profiles, and users.\n\nSecurity: Most endpoints require a JWT cookie (httpOnly) set by /auth/login. Alternatively you may send an Authorization: Bearer <token> header.\n\nConventions:\n- Pagination: query params page (1-based), limit (default 10, max 100). Responses include page, limit, total, totalPages, hasMore.\n- Sorting: where implemented, optional sort / order query params (not all endpoints expose yet).\n- Filtering: resource-specific query params (e.g., department scoping enforced server-side).\n- Date/time fields are ISO8601 strings in UTC.\n- Errors follow the Error schema.",
    "version": "1.0.0"
  },
  "externalDocs": {
    "description": "Project README",
    "url": "https://github.com/Samnang-Vouen/Lecturer-Information-System-Contract-Generation"
  },
  "servers": [{ "url": "http://localhost:4000", "description": "Local" }],
  "tags": [
    { "name": "Auth", "description": "Authentication & session" },
    { "name": "Candidates", "description": "Recruitment candidates" },
    { "name": "Interview", "description": "Interview questions & candidate responses" },
    { "name": "Lecturers", "description": "Lecturer management" },
    { "name": "LecturerProfile", "description": "Lecturer self-service profile" },
    { "name": "Onboarding", "description": "Lecturer onboarding submissions" },
    { "name": "Catalog", "description": "Reference data (departments, courses)" },
    { "name": "Courses", "description": "Course definitions" },
    { "name": "Classes", "description": "Class management" },
    { "name": "CourseMappings", "description": "Class-course mapping records" },
    { "name": "Schedule", "description": "Schedule containers (timetables per group)" },
    { "name": "ScheduleEntry", "description": "Schedule time slot entries" },
    { "name": "Evaluation", "description": "Lecturer evaluation management" },
    { "name": "Users", "description": "Administrative user management" },
    { "name": "Dashboard", "description": "Dashboard stats" },
    { "name": "Profile", "description": "Authenticated user profile & password" }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": { "type": "apiKey", "in": "cookie", "name": "jwt" },
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "email": { "type": "string", "format": "email" },
          "role": { "type": "string", "enum": ["superadmin", "admin", "management", "lecturer"] },
          "fullName": { "type": "string", "nullable": true },
          "department": { "type": "string", "nullable": true },
          "status": { "type": "string", "enum": ["active", "inactive"] },
          "lastLogin": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "Candidate": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "fullName": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "phone": { "type": "string", "nullable": true },
          "positionAppliedFor": { "type": "string" },
          "interviewDate": { "type": "string", "format": "date-time", "nullable": true },
          "status": {
            "type": "string",
            "enum": ["pending", "interview", "discussion", "final", "accepted", "rejected"]
          },
          "interviewScore": { "type": "number", "format": "float", "nullable": true },
          "rejectionReason": { "type": "string", "nullable": true },
          "hourlyRate": { "type": "number", "nullable": true },
          "rateReason": { "type": "string", "nullable": true },
          "evaluator": { "type": "string", "nullable": true },
          "dept_id": { "type": "integer", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "InterviewQuestion": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "question_text": { "type": "string" },
          "category": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "CandidateQuestionResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "candidate_id": { "type": "integer" },
          "question_id": { "type": "integer" },
          "rating": { "type": "number", "format": "float", "nullable": true },
          "noted": { "type": "string", "nullable": true },
          "category": { "type": "string" },
          "question_text": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "Course": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "course_code": { "type": "string" },
          "course_name": { "type": "string" },
          "credit_hours": { "type": "integer" },
          "dept_id": { "type": "integer", "nullable": true }
        }
      },
      "Schedule": {
        "type": "object",
        "description": "Schedule container (timetable) for a group",
        "properties": {
          "id": { "type": "integer" },
          "group_id": {
            "type": "integer",
            "description": "ID of the group this schedule belongs to"
          },
          "name": { "type": "string", "description": "Name of the schedule/timetable" },
          "notes": { "type": "string", "nullable": true },
          "start_date": { "type": "string", "format": "date", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" },
          "Group": {
            "type": "object",
            "properties": {
              "name": { "type": "string" },
              "num_of_student": { "type": "integer" },
              "Class": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "academic_year": { "type": "string" },
                  "year_level": { "type": "integer" },
                  "term": { "type": "string" },
                  "Specialization": {
                    "type": "object",
                    "properties": {
                      "name": { "type": "string" },
                      "Department": {
                        "type": "object",
                        "properties": {
                          "dept_name": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "ScheduleEntry": {
        "type": "object",
        "description": "Individual time slot entry in a schedule",
        "properties": {
          "id": { "type": "integer" },
          "schedule_id": {
            "type": "integer",
            "description": "ID of the parent schedule container"
          },
          "course_mapping_id": { "type": "integer" },
          "time_slot_id": { "type": "integer" },
          "day_of_week": {
            "type": "string",
            "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
          },
          "room": { "type": "string" },
          "session_type": {
            "type": "string",
            "enum": ["Theory", "Lab", "Lab + Theory"]
          },
          "created_at": { "type": "string", "format": "date-time" },
          "TimeSlot": {
            "type": "object",
            "properties": {
              "label": { "type": "string" },
              "order_index": { "type": "integer" }
            }
          },
          "CourseMapping": {
            "type": "object",
            "properties": {
              "id": { "type": "integer" },
              "Course": {
                "type": "object",
                "properties": {
                  "course_name": { "type": "string" },
                  "course_code": { "type": "string" }
                }
              },
              "LecturerProfile": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" },
                  "full_name_english": { "type": "string" }
                }
              },
              "Group": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "num_of_student": { "type": "integer" }
                }
              }
            }
          }
        }
      },
      "Evaluation": {
        "type": "object",
        "description": "Lecturer evaluation data",
        "properties": {
          "id": { "type": "integer" },
          "course_mapping_id": { "type": "integer" },
          "file_path": { "type": "string" },
          "uploaded_at": { "type": "string", "format": "date-time" },
          "uploaded_by": { "type": "integer", "description": "User ID who uploaded" }
        }
      },
      "Class": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_name": { "type": "string" },
          "dept_id": { "type": "integer", "nullable": true },
          "courses": {
            "type": "array",
            "items": { "type": "integer" },
            "description": "Array of course IDs assigned (serialized)"
          }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_id": { "type": "integer" },
          "name": { "type": "string", "description": "Group name (e.g., G1, G2)" },
          "num_of_student": { "type": "integer", "description": "Number of students in the group" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" }
        }
      },
      "CourseMapping": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_id": { "type": "integer" },
          "course_id": { "type": "integer" },
          "lecturer_id": { "type": "integer", "nullable": true },
          "hours": { "type": "number" }
        }
      },
      "LecturerProfile": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "user_id": { "type": "integer" },
          "bio": { "type": "string", "nullable": true },
          "status": { "type": "string" },
          "department": { "type": "string", "nullable": true }
        }
      },
      "OnboardingSubmission": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "user_id": { "type": "integer" },
          "status": { "type": "string" },
          "submitted_at": { "type": "string", "format": "date-time" }
        }
      },
      "PaginatedCandidates": {
        "type": "object",
        "properties": {
          "data": { "type": "array", "items": { "$ref": "#/components/schemas/Candidate" } },
          "page": { "type": "integer" },
          "limit": { "type": "integer" },
          "total": { "type": "integer" },
          "totalPages": { "type": "integer" },
          "hasMore": { "type": "boolean" }
        }
      },
      "DashboardStats": {
        "type": "object",
        "properties": {
          "totalCandidates": { "type": "integer" },
          "totalLecturers": { "type": "integer" }
        }
      },
      "Error": {
        "type": "object",
        "required": ["message"],
        "properties": {
          "message": { "type": "string" },
          "code": { "type": "string", "nullable": true },
          "details": { "type": "object", "nullable": true }
        }
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Not authorized" }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Access denied" }
          }
        }
      },
      "NotFound": {
        "description": "Not Found",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Resource not found" }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Invalid input" }
          }
        }
      },
      "Conflict": {
        "description": "Conflict",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Email already exists" }
          }
        }
      },
      "ServerError": {
        "description": "Server error",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Server error" }
          }
        }
      }
    }
  },
  "security": [{ "cookieAuth": [], "bearerAuth": [] }],
  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login and obtain JWT cookie",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string", "minLength": 6 }
                }
              },
              "example": { "email": "admin@cadt.edu.kh", "password": "secret123" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                },
                "example": {
                  "success": true,
                  "user": { "id": 1, "email": "admin@cadt.edu.kh", "role": "admin" }
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "Logout (clear JWT)",
        "responses": {
          "200": {
            "description": "Logged out",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Logged out successfully" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        }
      }
    },
    "/api/auth/check": {
      "get": {
        "tags": ["Auth"],
        "summary": "Check authentication status",
        "responses": {
          "200": {
            "description": "Auth status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "authenticated": { "type": "boolean" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                },
                "examples": {
                  "unauthenticated": {
                    "summary": "Not logged in",
                    "value": { "authenticated": false }
                  },
                  "authenticated": {
                    "summary": "Logged in",
                    "value": {
                      "authenticated": true,
                      "user": { "id": 1, "email": "admin@cadt.edu.kh", "role": "admin" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/candidates": {
      "get": {
        "tags": ["Candidates"],
        "summary": "List candidates (paginated)",
        "parameters": [
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 } }
        ],
        "responses": {
          "200": {
            "description": "Paginated candidates",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PaginatedCandidates" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Candidates"],
        "summary": "Create candidate",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fullName", "email"],
                "properties": {
                  "fullName": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "phone": { "type": "string" },
                  "positionAppliedFor": { "type": "string" },
                  "interviewDate": { "type": "string", "format": "date-time" }
                }
              },
              "example": {
                "fullName": "Jane Doe",
                "email": "jane@cadt.edu.kh",
                "positionAppliedFor": "Lecturer"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/candidates/{id}": {
      "patch": {
        "tags": ["Candidates"],
        "summary": "Update candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Candidates"],
        "summary": "Delete candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Candidate deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/interview-questions": {
      "get": {
        "tags": ["Interview"],
        "summary": "List interview questions grouped by category",
        "parameters": [
          {
            "name": "defaultOnly",
            "in": "query",
            "schema": { "type": "boolean" },
            "description": "Return only default (seeded) questions"
          }
        ],
        "responses": {
          "200": {
            "description": "Questions grouped by category",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "categories": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/InterviewQuestion" }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Interview"],
        "summary": "Add interview question",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["question_text", "category"],
                "properties": {
                  "question_text": { "type": "string" },
                  "category": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/InterviewQuestion" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/{id}": {
      "put": {
        "tags": ["Interview"],
        "summary": "Update interview question text",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["question_text"],
                "properties": { "question_text": { "type": "string" } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/InterviewQuestion" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/search": {
      "get": {
        "tags": ["Interview"],
        "summary": "Search interview questions",
        "parameters": [
          { "name": "query", "in": "query", "required": true, "schema": { "type": "string" } }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/InterviewQuestion" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/candidate-questions": {
      "post": {
        "tags": ["Interview"],
        "summary": "Add/update candidate response (rating or note)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["candidate_id", "question_id"],
                "properties": {
                  "candidate_id": { "type": "integer" },
                  "question_id": { "type": "integer" },
                  "rating": { "type": "number", "nullable": true },
                  "noted": { "type": "string", "nullable": true }
                }
              },
              "example": {
                "candidate_id": 5,
                "question_id": 12,
                "rating": 4,
                "noted": "Good explanation"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Saved",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CandidateQuestionResponse" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/candidates/{id}/interview-details": {
      "get": {
        "tags": ["Candidates"],
        "summary": "Full interview responses (ratings & notes) for candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Interview responses (may be empty)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "candidate_id": { "type": "integer" },
                    "responses": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/CandidateQuestionResponse" }
                    }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturers": {
      "get": {
        "tags": ["Lecturers"],
        "summary": "List lecturers",
        "responses": {
          "200": {
            "description": "Lecturer profiles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/LecturerProfile" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Lecturers"],
        "summary": "Create lecturer user",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/detail": {
      "get": {
        "tags": ["Lecturers"],
        "summary": "Get lecturer detail",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Detail",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/courses": {
      "put": {
        "tags": ["Lecturers"],
        "summary": "Update lecturer courses",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": { "courseIds": { "type": "array", "items": { "type": "integer" } } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/profile": {
      "patch": {
        "tags": ["Lecturers"],
        "summary": "Patch lecturer profile fields",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}": {
      "put": {
        "tags": ["Lecturers"],
        "summary": "Update lecturer user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Lecturers"],
        "summary": "Delete lecturer user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "User deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/status": {
      "patch": {
        "tags": ["Lecturers"],
        "summary": "Toggle lecturer status",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Status updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturer-profile/me": {
      "get": {
        "tags": ["LecturerProfile"],
        "summary": "Get my lecturer profile",
        "responses": {
          "200": {
            "description": "Profile",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "put": {
        "tags": ["LecturerProfile"],
        "summary": "Update my lecturer profile",
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturer-profile/me/files": {
      "post": {
        "tags": ["LecturerProfile"],
        "summary": "Upload CV/Syllabus files",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "cv": { "type": "string", "format": "binary" },
                  "syllabus": { "type": "string", "format": "binary" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Uploaded",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "413": { "description": "Payload too large" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturers/onboarding/status": {
      "get": {
        "tags": ["Onboarding"],
        "summary": "Check my onboarding status",
        "responses": {
          "200": {
            "description": "Status",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/OnboardingSubmission" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/onboarding": {
      "post": {
        "tags": ["Onboarding"],
        "summary": "Submit onboarding form & files",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "form": { "type": "string" },
                  "attachments": {
                    "type": "array",
                    "items": { "type": "string", "format": "binary" }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Submitted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/OnboardingSubmission" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/catalog/departments": {
      "get": {
        "tags": ["Catalog"],
        "summary": "List departments",
        "responses": {
          "200": {
            "description": "Departments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": { "id": { "type": "integer" }, "dept_name": { "type": "string" } }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/catalog/courses": {
      "get": {
        "tags": ["Catalog"],
        "summary": "List catalog courses",
        "responses": {
          "200": {
            "description": "Courses",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Course" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/courses": {
      "get": {
        "tags": ["Courses"],
        "summary": "List courses (paginated)",
        "parameters": [
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 } }
        ],
        "responses": {
          "200": {
            "description": "Paginated courses",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": { "type": "array", "items": { "$ref": "#/components/schemas/Course" } },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" },
                    "total": { "type": "integer" },
                    "totalPages": { "type": "integer" },
                    "hasMore": { "type": "boolean" },
                    "note": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Courses"],
        "summary": "Create course",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Course" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Course" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/courses/{id}": {
      "put": {
        "tags": ["Courses"],
        "summary": "Update course",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Course" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Course" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Courses"],
        "summary": "Delete course",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/classes": {
      "get": {
        "tags": ["Classes"],
        "summary": "List classes",
        "responses": {
          "200": {
            "description": "Classes",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Class" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Classes"],
        "summary": "Create class",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Class" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/classes/{id}": {
      "get": {
        "tags": ["Classes"],
        "summary": "Get class by id",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Class",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "put": {
        "tags": ["Classes"],
        "summary": "Update class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Class" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Classes"],
        "summary": "Delete class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/classes/{id}/courses": {
      "put": {
        "tags": ["Classes"],
        "summary": "Assign courses to class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": { "courses": { "type": "array", "items": { "type": "integer" } } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated class",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/groups": {
      "get": {
        "tags": ["Groups"],
        "summary": "List all groups",
        "description": "Retrieves all groups with optional filtering by class name, department, or specialization",
        "parameters": [
          {
            "name": "class_name",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by class name"
          },
          {
            "name": "dept_name",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by department name"
          },
          {
            "name": "specialization",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by specialization name"
          }
        ],
        "responses": {
          "200": {
            "description": "List of groups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "group": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Group" }
                    },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "group": [
                    {
                      "id": 1,
                      "class_id": 5,
                      "name": "G1",
                      "num_of_student": 30,
                      "Class": {
                        "name": "CS-Y4-A",
                        "Specialization": {
                          "name": "Computer Science",
                          "Department": { "dept_name": "Engineering" }
                        }
                      }
                    }
                  ],
                  "message": "Group retrieved successfully."
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Groups"],
        "summary": "Create a new group",
        "description": "Creates a new group for a specific class",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["class_id", "name", "num_of_student"],
                "properties": {
                  "class_id": {
                    "type": "integer",
                    "description": "ID of the class this group belongs to"
                  },
                  "name": {
                    "type": "string",
                    "description": "Group name (e.g., G1, G2, G3)"
                  },
                  "num_of_student": {
                    "type": "integer",
                    "description": "Number of students in the group"
                  }
                }
              },
              "example": {
                "class_id": 5,
                "name": "G1",
                "num_of_student": 30
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "group": { "$ref": "#/components/schemas/Group" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "group": {
                    "id": 1,
                    "class_id": 5,
                    "name": "G1",
                    "num_of_student": 30
                  },
                  "message": "Group created successfully."
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required field",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "missing_class_id": {
                    "summary": "Missing class_id",
                    "value": { "message": "Required class_id" }
                  },
                  "missing_name": {
                    "summary": "Missing name",
                    "value": { "message": "Required name" }
                  },
                  "missing_num_of_student": {
                    "summary": "Missing num_of_student",
                    "value": { "message": "Required num_of_student" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Class not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Class Model not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/groups/{id}": {
      "put": {
        "tags": ["Groups"],
        "summary": "Update a group",
        "description": "Updates an existing group's details",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Group ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["class_id", "name", "num_of_student"],
                "properties": {
                  "class_id": {
                    "type": "integer",
                    "description": "ID of the class this group belongs to"
                  },
                  "name": {
                    "type": "string",
                    "description": "Group name (e.g., G1, G2, G3)"
                  },
                  "num_of_student": {
                    "type": "integer",
                    "description": "Number of students in the group"
                  }
                }
              },
              "example": {
                "class_id": 5,
                "name": "G2",
                "num_of_student": 35
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "existingGroup": { "$ref": "#/components/schemas/Group" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "existingGroup": {
                    "id": 1,
                    "class_id": 5,
                    "name": "G2",
                    "num_of_student": 35
                  },
                  "message": "Group updated successfully."
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required field",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "missing_class_id": {
                    "summary": "Missing class_id",
                    "value": { "message": "Required class_id" }
                  },
                  "missing_name": {
                    "summary": "Missing name",
                    "value": { "message": "Required name" }
                  },
                  "missing_num_of_student": {
                    "summary": "Missing num_of_student",
                    "value": { "message": "Required num_of_student" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Group or class not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "group_not_found": {
                    "summary": "Group not found",
                    "value": { "message": "Group not found" }
                  },
                  "class_not_found": {
                    "summary": "Class not found",
                    "value": { "message": "Class Model not found" }
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Groups"],
        "summary": "Delete a group",
        "description": "Deletes an existing group",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Group ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Group deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Group deleted successfully." }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Group not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/course-mappings": {
      "get": {
        "tags": ["CourseMappings"],
        "summary": "List course mappings",
        "responses": {
          "200": {
            "description": "Mappings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/CourseMapping" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["CourseMappings"],
        "summary": "Create mapping",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/course-mappings/{id}": {
      "put": {
        "tags": ["CourseMappings"],
        "summary": "Update mapping",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["CourseMappings"],
        "summary": "Delete mapping",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/users": {
      "get": {
        "tags": ["Users"],
        "summary": "List users",
        "responses": {
          "200": {
            "description": "Users",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/User" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Users"],
        "summary": "Create user",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/users/{id}": {
      "put": {
        "tags": ["Users"],
        "summary": "Update user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Delete user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "User deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/users/{id}/status": {
      "patch": {
        "tags": ["Users"],
        "summary": "Toggle user status",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Status updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/dashboard/stats": {
      "get": {
        "tags": ["Dashboard"],
        "summary": "Get dashboard statistics",
        "responses": {
          "200": {
            "description": "Stats",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/DashboardStats" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/profile/me": {
      "get": {
        "tags": ["Profile"],
        "summary": "Get my user profile",
        "responses": {
          "200": {
            "description": "Profile",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/profile/activity": {
      "get": {
        "tags": ["Profile"],
        "summary": "Get my recent activity",
        "responses": {
          "200": {
            "description": "Activity list",
            "content": {
              "application/json": { "schema": { "type": "array", "items": { "type": "object" } } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/profile/change-password": {
      "post": {
        "tags": ["Profile"],
        "summary": "Change my password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["oldPassword", "newPassword"],
                "properties": {
                  "oldPassword": { "type": "string" },
                  "newPassword": { "type": "string", "minLength": 6 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Password updated successfully" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedules": {
      "get": {
        "tags": ["Schedule"],
        "summary": "Get all schedule containers",
        "description": "Retrieves all schedule containers (timetables) with optional filtering by class, department, or specialization",
        "parameters": [
          {
            "name": "class_name",
            "in": "query",
            "description": "Filter schedules by class name",
            "required": false,
            "schema": { "type": "string" },
            "example": "CS-Y4-A"
          },
          {
            "name": "dept_name",
            "in": "query",
            "description": "Filter schedules by department name",
            "required": false,
            "schema": { "type": "string" },
            "example": "Computer Science"
          },
          {
            "name": "specialization",
            "in": "query",
            "description": "Filter schedules by specialization",
            "required": false,
            "schema": { "type": "string" },
            "example": "Software Engineering"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule containers retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedules": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Schedule" }
                    },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedules": [
                    {
                      "id": 1,
                      "group_id": 5,
                      "name": "G1 Timetable - Term 1",
                      "notes": "Regular schedule",
                      "start_date": "2026-01-15",
                      "created_at": "2026-01-10T08:00:00Z",
                      "Group": {
                        "name": "G1",
                        "num_of_student": 30,
                        "Class": {
                          "name": "CS-Y4-A",
                          "academic_year": "2025-2026",
                          "year_level": 4,
                          "term": "1",
                          "Specialization": {
                            "name": "Software Engineering",
                            "Department": {
                              "dept_name": "Computer Science"
                            }
                          }
                        }
                      }
                    }
                  ],
                  "message": "Schedule retrieved successfully."
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Schedule"],
        "summary": "Create a new schedule container",
        "description": "Creates a new schedule container (timetable) for a group. Each group can only have one schedule.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["group_id", "name"],
                "properties": {
                  "group_id": {
                    "type": "integer",
                    "description": "ID of the group this schedule belongs to"
                  },
                  "name": {
                    "type": "string",
                    "description": "Name of the schedule/timetable"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Optional notes about the schedule"
                  },
                  "start_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Start date of the schedule"
                  }
                }
              },
              "example": {
                "group_id": 5,
                "name": "G1 Timetable - Term 1",
                "notes": "Regular schedule for Group 1",
                "start_date": "2026-02-01"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Schedule container created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/Schedule" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 1,
                    "group_id": 5,
                    "name": "G1 Timetable - Term 1",
                    "notes": "Regular schedule for Group 1",
                    "start_date": "2026-02-01"
                  },
                  "message": "Schedule created successfully."
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "missing_group_id": {
                    "summary": "Missing group_id",
                    "value": { "message": "Required group_id" }
                  },
                  "missing_name": {
                    "summary": "Missing name",
                    "value": { "message": "Required name" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Group not found" }
              }
            }
          },
          "409": {
            "description": "Schedule already exists for this group",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "existing_schedule_id": { "type": "integer" },
                    "existing_schedule_name": { "type": "string" }
                  }
                },
                "example": {
                  "message": "A schedule already exists for this group",
                  "existing_schedule_id": 3,
                  "existing_schedule_name": "G1 Timetable - Term 1"
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedules/pdf": {
      "get": {
        "tags": ["Schedule"],
        "summary": "Generate and download schedule PDF",
        "description": "Generates a PDF document of filtered schedules. Query parameters work the same as GET /api/schedules.",
        "parameters": [
          {
            "name": "class_name",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "dept_name",
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "specialization",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "PDF file",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "No schedule found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "No schedule found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedules/{id}": {
      "get": {
        "tags": ["Schedule"],
        "summary": "Get schedule container by ID",
        "description": "Retrieves a specific schedule container with its associated group and class information",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule container retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/Schedule" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 1,
                    "group_id": 5,
                    "name": "G1 Timetable - Term 1",
                    "notes": "Regular schedule",
                    "start_date": "2026-01-15",
                    "created_at": "2026-01-10T08:00:00Z"
                  },
                  "message": "Schedule retrieved successfully."
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "put": {
        "tags": ["Schedule"],
        "summary": "Update schedule container",
        "description": "Updates the details of a schedule container",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "notes": { "type": "string" },
                  "start_date": { "type": "string", "format": "date" }
                }
              },
              "example": {
                "name": "G1 Updated Timetable",
                "notes": "Updated schedule notes",
                "start_date": "2026-02-15"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Schedule updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "message": "Schedule updated successfully"
                }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Schedule"],
        "summary": "Delete schedule container",
        "description": "Deletes a schedule container and all its associated schedule entries",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule deleted successfully" }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedule-entries": {
      "get": {
        "tags": ["ScheduleEntry"],
        "summary": "Get all schedule entries (time slots)",
        "description": "Retrieves all schedule entries with optional filtering by class, department, specialization, or schedule_id",
        "parameters": [
          {
            "name": "schedule_id",
            "in": "query",
            "description": "Filter by specific schedule container ID",
            "required": false,
            "schema": { "type": "integer" },
            "example": 1
          },
          {
            "name": "class_name",
            "in": "query",
            "description": "Filter by class name",
            "required": false,
            "schema": { "type": "string" },
            "example": "CS-Y4-A"
          },
          {
            "name": "dept_name",
            "in": "query",
            "description": "Filter by department name",
            "required": false,
            "schema": { "type": "string" },
            "example": "Computer Science"
          },
          {
            "name": "specialization",
            "in": "query",
            "description": "Filter by specialization",
            "required": false,
            "schema": { "type": "string" },
            "example": "Software Engineering"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule entries retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ScheduleEntry" }
                    },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": [
                    {
                      "id": 1,
                      "schedule_id": 1,
                      "day_of_week": "Monday",
                      "room": "A101",
                      "session_type": "Theory",
                      "created_at": "2026-01-10T08:00:00Z",
                      "TimeSlot": {
                        "label": "08h:00-09h:30",
                        "order_index": 1
                      },
                      "CourseMapping": {
                        "id": 1,
                        "Course": {
                          "course_name": "Web Development",
                          "course_code": "CS401"
                        },
                        "LecturerProfile": {
                          "title": "Dr",
                          "full_name_english": "John Smith"
                        },
                        "Group": {
                          "name": "G1",
                          "num_of_student": 30
                        }
                      }
                    }
                  ],
                  "message": "Schedule entries retrieved successfully"
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["ScheduleEntry"],
        "summary": "Create a new schedule entry",
        "description": "Creates a new time slot entry in a schedule. The day and time slot must match the course mapping's availability. Automatically checks for conflicts (lecturer/room) and allows combined sessions (same course, lecturer, room, time but different groups).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "schedule_id",
                  "course_mapping_id",
                  "time_slot_id",
                  "day_of_week",
                  "room",
                  "session_type"
                ],
                "properties": {
                  "schedule_id": {
                    "type": "integer",
                    "description": "ID of the parent schedule container"
                  },
                  "course_mapping_id": {
                    "type": "integer",
                    "description": "ID of the course mapping"
                  },
                  "time_slot_id": {
                    "type": "integer",
                    "description": "ID of the time slot (must match an available session)"
                  },
                  "day_of_week": {
                    "type": "string",
                    "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                    "description": "Day of the week (must match availability)"
                  },
                  "room": {
                    "type": "string",
                    "description": "Room number or name"
                  },
                  "session_type": {
                    "type": "string",
                    "enum": ["Theory", "Lab", "Lab + Theory"],
                    "description": "Type of session"
                  }
                }
              },
              "example": {
                "schedule_id": 1,
                "course_mapping_id": 5,
                "time_slot_id": 2,
                "day_of_week": "Monday",
                "room": "A101",
                "session_type": "Theory"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Schedule entry created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/ScheduleEntry" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 15,
                    "schedule_id": 1,
                    "course_mapping_id": 5,
                    "time_slot_id": 2,
                    "day_of_week": "Monday",
                    "room": "A101",
                    "session_type": "Theory"
                  },
                  "message": "Schedule entry created successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required fields or not in availability",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "availability": { "type": "string" },
                    "requested": { "type": "object" },
                    "hint": { "type": "string" }
                  }
                },
                "examples": {
                  "missing_field": {
                    "summary": "Missing required field",
                    "value": { "message": "Required room" }
                  },
                  "not_in_availability": {
                    "summary": "Schedule not in availability",
                    "value": {
                      "message": "Invalid schedule: Friday at 08h:00-09h:30 is not in the course availability.",
                      "availability": "Monday: S1, S2; Wednesday: S3, S4",
                      "requested": {
                        "day": "Friday",
                        "time_slot": "08h:00-09h:30"
                      },
                      "hint": "The schedule must match one of the sessions defined in the course mapping availability."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Schedule or course mapping not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "schedule_not_found": {
                    "summary": "Schedule not found",
                    "value": { "message": "Schedule not found" }
                  },
                  "course_mapping_not_found": {
                    "summary": "Course mapping not found",
                    "value": { "message": "Course mapping not found" }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Schedule conflict or duplicate entry",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "conflict": { "type": "object" }
                  }
                },
                "examples": {
                  "duplicate_entry": {
                    "summary": "Duplicate schedule entry",
                    "value": {
                      "message": "This schedule entry already exists in the same schedule"
                    }
                  },
                  "lecturer_conflict": {
                    "summary": "Lecturer conflict",
                    "value": {
                      "message": "Lecturer conflict: Dr. John Smith is teaching a different course at this time"
                    }
                  },
                  "room_conflict": {
                    "summary": "Room conflict",
                    "value": {
                      "message": "Room conflict: Room A101 is occupied by another class at this time"
                    }
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedule-entries/bulk": {
      "post": {
        "tags": ["ScheduleEntry"],
        "summary": "Create multiple schedule entries at once",
        "description": "Bulk creates schedule entries for a schedule container. All entries are validated before creation. If any entry fails validation or creates a conflict, the entire operation is rolled back (atomic transaction).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["schedule_id", "entries"],
                "properties": {
                  "schedule_id": {
                    "type": "integer",
                    "description": "ID of the parent schedule container"
                  },
                  "entries": {
                    "type": "array",
                    "description": "Array of schedule entries to create",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "course_mapping_id",
                        "time_slot_id",
                        "day_of_week",
                        "room",
                        "session_type"
                      ],
                      "properties": {
                        "course_mapping_id": { "type": "integer" },
                        "time_slot_id": { "type": "integer" },
                        "day_of_week": {
                          "type": "string",
                          "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
                        },
                        "room": { "type": "string" },
                        "session_type": {
                          "type": "string",
                          "enum": ["Theory", "Lab", "Lab + Theory"]
                        }
                      }
                    }
                  }
                }
              },
              "example": {
                "schedule_id": 1,
                "entries": [
                  {
                    "course_mapping_id": 5,
                    "time_slot_id": 2,
                    "day_of_week": "Monday",
                    "room": "A101",
                    "session_type": "Theory"
                  },
                  {
                    "course_mapping_id": 6,
                    "time_slot_id": 3,
                    "day_of_week": "Wednesday",
                    "room": "B202",
                    "session_type": "Lab"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "All schedule entries created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedules": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/ScheduleEntry" }
                    },
                    "message": { "type": "string" },
                    "count": { "type": "integer" }
                  }
                },
                "example": {
                  "schedules": [
                    {
                      "id": 15,
                      "schedule_id": 1,
                      "course_mapping_id": 5,
                      "time_slot_id": 2,
                      "day_of_week": "Monday",
                      "room": "A101",
                      "session_type": "Theory"
                    },
                    {
                      "id": 16,
                      "schedule_id": 1,
                      "course_mapping_id": 6,
                      "time_slot_id": 3,
                      "day_of_week": "Wednesday",
                      "room": "B202",
                      "session_type": "Lab"
                    }
                  ],
                  "message": "Bulk schedule entries created successfully",
                  "count": 2
                }
              }
            }
          },
          "400": {
            "description": "Validation error in one or more entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "entryIndex": { "type": "integer" },
                    "error": { "type": "string" }
                  }
                },
                "examples": {
                  "missing_schedule_id": {
                    "summary": "Missing schedule_id",
                    "value": { "message": "Required schedule_id" }
                  },
                  "empty_entries": {
                    "summary": "Empty entries array",
                    "value": { "message": "Required entries array with at least one entry" }
                  },
                  "missing_field": {
                    "summary": "Missing required field in entry",
                    "value": {
                      "message": "Missing required field in entry",
                      "entryIndex": 0,
                      "error": "Required room"
                    }
                  },
                  "duplicate_in_request": {
                    "summary": "Duplicate entries in request",
                    "value": {
                      "message": "Duplicate schedule entry found in request",
                      "entryIndex": 2,
                      "error": "Monday at time_slot_id 2 in room A101 appears multiple times"
                    }
                  },
                  "not_in_availability": {
                    "summary": "Entry not in course availability",
                    "value": {
                      "message": "Invalid schedule entry",
                      "entryIndex": 1,
                      "error": "Friday at 08h:00-09h:30 is not in the course availability"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Schedule or course mapping not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "409": {
            "description": "Conflict detected in one or more entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "entryIndex": { "type": "integer" },
                    "error": { "type": "string" }
                  }
                },
                "examples": {
                  "duplicate_in_db": {
                    "summary": "Entry already exists in database",
                    "value": {
                      "message": "Duplicate schedule entry",
                      "entryIndex": 0,
                      "error": "This schedule entry already exists"
                    }
                  },
                  "lecturer_conflict": {
                    "summary": "Lecturer teaching different course at same time",
                    "value": {
                      "message": "Schedule conflict",
                      "entryIndex": 1,
                      "error": "Lecturer conflict: Dr. John Smith is teaching a different course at this time"
                    }
                  },
                  "room_conflict": {
                    "summary": "Room occupied by another class",
                    "value": {
                      "message": "Schedule conflict",
                      "entryIndex": 2,
                      "error": "Room conflict: Room A101 is occupied by another class at this time"
                    }
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedule-entries/{id}": {
      "put": {
        "tags": ["ScheduleEntry"],
        "summary": "Update a schedule entry",
        "description": "Updates an existing schedule entry. When changing day or time slot, they must match the course mapping's availability. Checks for conflicts.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule entry ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "course_mapping_id": { "type": "integer" },
                  "time_slot_id": { "type": "integer" },
                  "day_of_week": {
                    "type": "string",
                    "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
                  },
                  "room": { "type": "string" },
                  "session_type": {
                    "type": "string",
                    "enum": ["Theory", "Lab", "Lab + Theory"]
                  }
                }
              },
              "example": {
                "day_of_week": "Tuesday",
                "room": "B303",
                "session_type": "Lab"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Schedule entry updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/ScheduleEntry" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 15,
                    "day_of_week": "Tuesday",
                    "room": "B303",
                    "session_type": "Lab"
                  },
                  "message": "Schedule entry updated successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - not in availability",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "availability": { "type": "string" },
                    "requested": { "type": "object" }
                  }
                },
                "example": {
                  "message": "Invalid schedule: Friday at 15h:30-17h:00 is not in the course availability.",
                  "availability": "Monday: S1, S2; Wednesday: S3, S4",
                  "requested": {
                    "day": "Friday",
                    "time_slot": "15h:30-17h:00"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Schedule entry or course mapping not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule entry not found" }
              }
            }
          },
          "409": {
            "description": "Schedule conflict detected",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "conflict": { "type": "object" }
                  }
                },
                "example": {
                  "message": "Lecturer conflict: Dr. John Smith is teaching a different course at this time"
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["ScheduleEntry"],
        "summary": "Delete a schedule entry",
        "description": "Deletes an existing schedule entry (time slot)",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule entry ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule entry deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule entry deleted successfully" }
              }
            }
          },
          "404": {
            "description": "Schedule entry not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule entry not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/evaluations/{evaluationId}/results": {
      "get": {
        "tags": ["Evaluation"],
        "summary": "Get evaluation results and statistics",
        "description": "Retrieves aggregated evaluation results for a specific evaluation, grouped by specialization and group. Includes question averages, response counts, and comments for each lecturer.",
        "parameters": [
          {
            "name": "evaluationId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Evaluation ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Evaluation results retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "evaluation_id": { "type": "integer" },
                    "course_mapping_id": { "type": "integer" },
                    "course_info": {
                      "type": "object",
                      "properties": {
                        "course_name": { "type": "string" },
                        "class_name": { "type": "string" },
                        "term": { "type": "string" },
                        "year_level": { "type": "integer" },
                        "academic_year": { "type": "string" },
                        "specialization": { "type": "string" },
                        "department": { "type": "string" }
                      }
                    },
                    "total_submissions": { "type": "integer" },
                    "groups": {
                      "type": "object",
                      "description": "Results grouped by specialization and group name",
                      "additionalProperties": {
                        "type": "object",
                        "properties": {
                          "specialization": { "type": "string" },
                          "group_name": { "type": "string" },
                          "responses_received": { "type": "integer" },
                          "total_students": { "type": "integer" },
                          "lecturer_evaluations": {
                            "type": "object",
                            "description": "Evaluation data keyed by lecturer ID",
                            "additionalProperties": {
                              "type": "object",
                              "properties": {
                                "lecturer_id": { "type": "integer" },
                                "question_averages": {
                                  "type": "object",
                                  "description": "Average ratings by question ID",
                                  "additionalProperties": { "type": "number" }
                                },
                                "comments": {
                                  "type": "array",
                                  "items": { "type": "string" }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "example": {
                  "evaluation_id": 5,
                  "course_mapping_id": 12,
                  "course_info": {
                    "course_name": "Web Development",
                    "class_name": "CS-Y4-A",
                    "term": "1",
                    "year_level": 4,
                    "academic_year": "2025-2026",
                    "specialization": "Software Engineering",
                    "department": "Computer Science"
                  },
                  "total_submissions": 25,
                  "groups": {
                    "Software Engineering Group G1": {
                      "specialization": "Software Engineering",
                      "group_name": "G1",
                      "responses_received": 25,
                      "total_students": 30,
                      "lecturer_evaluations": {
                        "1": {
                          "lecturer_id": 1,
                          "question_averages": {
                            "1": 4.5,
                            "2": 4.8,
                            "3": 4.2
                          },
                          "comments": ["Excellent teaching style", "Very clear explanations"]
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Evaluation not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Evaluation not found" }
              }
            }
          },
          "500": {
            "description": "Failed to retrieve evaluation results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "error": { "type": "string" }
                  }
                },
                "example": {
                  "message": "Failed to retrieve evaluation results",
                  "error": "Database connection error"
                }
              }
            }
          }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/evaluations/upload": {
      "post": {
        "tags": ["Evaluation"],
        "summary": "Upload evaluation Excel file",
        "description": "Uploads and processes an Excel file containing lecturer evaluation responses. The file is parsed and evaluation data is stored in the database.",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["file"],
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "Excel file (.xlsx or .xls)"
                  },
                  "lecturer_names": {
                    "type": "string",
                    "description": "JSON array of lecturer names, e.g., [\"John Smith\", \"Jane Doe\"]"
                  },
                  "lecturer_ids": {
                    "type": "string",
                    "description": "JSON array of lecturer IDs (alternative to lecturer_names)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Evaluation uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "evaluation_id": { "type": "integer" },
                    "stats": {
                      "type": "object",
                      "properties": {
                        "total_submissions": { "type": "integer" },
                        "lecturers": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "error": { "type": "string" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Lecturer not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "error": { "type": "string" }
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/evaluations/{evaluationId}/lecturer/{lecturerId}/pdf": {
      "get": {
        "tags": ["Evaluation"],
        "summary": "Generate lecturer evaluation PDF report",
        "description": "Generates a PDF report for a specific lecturer's evaluation results.",
        "parameters": [
          {
            "name": "evaluationId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Evaluation ID"
          },
          {
            "name": "lecturerId",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Lecturer ID"
          }
        ],
        "responses": {
          "200": {
            "description": "PDF file",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "Evaluation or lecturer not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    }
  }
}
