{
  "openapi": "3.0.3",
  "info": {
    "title": "Lecturer Contract Generation System API",
    "description": "API documentation for Lecturer Contract Generation System: authentication, recruitment candidates, interview questions, lecturers, courses, classes, course mappings, onboarding, catalog, dashboard, profiles, and users.\n\nSecurity: Most endpoints require a JWT cookie (httpOnly) set by /auth/login. Alternatively you may send an Authorization: Bearer <token> header.\n\nConventions:\n- Pagination: query params page (1-based), limit (default 10, max 100). Responses include page, limit, total, totalPages, hasMore.\n- Sorting: where implemented, optional sort / order query params (not all endpoints expose yet).\n- Filtering: resource-specific query params (e.g., department scoping enforced server-side).\n- Date/time fields are ISO8601 strings in UTC.\n- Errors follow the Error schema.",
    "version": "1.0.0"
  },
  "externalDocs": {
    "description": "Project README",
    "url": "https://github.com/Samnang-Vouen/Lecturer-Information-System-Contract-Generation"
  },
  "servers": [{ "url": "http://localhost:4000", "description": "Local" }],
  "tags": [
    { "name": "Auth", "description": "Authentication & session" },
    { "name": "Candidates", "description": "Recruitment candidates" },
    { "name": "Interview", "description": "Interview questions & candidate responses" },
    { "name": "Lecturers", "description": "Lecturer management" },
    { "name": "LecturerProfile", "description": "Lecturer self-service profile" },
    { "name": "Onboarding", "description": "Lecturer onboarding submissions" },
    { "name": "Catalog", "description": "Reference data (departments, courses)" },
    { "name": "Courses", "description": "Course definitions" },
    { "name": "Classes", "description": "Class management" },
    { "name": "CourseMappings", "description": "Class-course mapping records" },
    { "name": "Schedule", "description": "Class schedule management" },
    { "name": "Users", "description": "Administrative user management" },
    { "name": "Dashboard", "description": "Dashboard stats" },
    { "name": "Profile", "description": "Authenticated user profile & password" }
  ],
  "components": {
    "securitySchemes": {
      "cookieAuth": { "type": "apiKey", "in": "cookie", "name": "jwt" },
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "email": { "type": "string", "format": "email" },
          "role": { "type": "string", "enum": ["superadmin", "admin", "management", "lecturer"] },
          "fullName": { "type": "string", "nullable": true },
          "department": { "type": "string", "nullable": true },
          "status": { "type": "string", "enum": ["active", "inactive"] },
          "lastLogin": { "type": "string", "format": "date-time", "nullable": true }
        }
      },
      "Candidate": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "fullName": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "phone": { "type": "string", "nullable": true },
          "positionAppliedFor": { "type": "string" },
          "interviewDate": { "type": "string", "format": "date-time", "nullable": true },
          "status": {
            "type": "string",
            "enum": ["pending", "interview", "discussion", "final", "accepted", "rejected"]
          },
          "interviewScore": { "type": "number", "format": "float", "nullable": true },
          "rejectionReason": { "type": "string", "nullable": true },
          "hourlyRate": { "type": "number", "nullable": true },
          "rateReason": { "type": "string", "nullable": true },
          "evaluator": { "type": "string", "nullable": true },
          "dept_id": { "type": "integer", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "InterviewQuestion": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "question_text": { "type": "string" },
          "category": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "CandidateQuestionResponse": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "candidate_id": { "type": "integer" },
          "question_id": { "type": "integer" },
          "rating": { "type": "number", "format": "float", "nullable": true },
          "noted": { "type": "string", "nullable": true },
          "category": { "type": "string" },
          "question_text": { "type": "string" },
          "created_at": { "type": "string", "format": "date-time" }
        }
      },
      "Course": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "course_code": { "type": "string" },
          "course_name": { "type": "string" },
          "credit_hours": { "type": "integer" },
          "dept_id": { "type": "integer", "nullable": true }
        }
      },
      "Schedule": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "day_of_week": {
            "type": "string",
            "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
          },
          "room": { "type": "string", "nullable": true },
          "session_type": {
            "type": "string",
            "enum": ["Theory", "Lab", "Lab + Theory"],
            "nullable": true
          },
          "notes": { "type": "string", "nullable": true },
          "start_date": { "type": "string", "format": "date", "nullable": true },
          "created_at": { "type": "string", "format": "date-time" },
          "TimeSlot": {
            "type": "object",
            "properties": {
              "label": { "type": "string" }
            }
          },
          "CourseMapping": {
            "type": "object",
            "properties": {
              "id": { "type": "integer" },
              "Department": {
                "type": "object",
                "properties": {
                  "dept_name": { "type": "string" }
                }
              },
              "Class": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "academic_year": { "type": "string" },
                  "year_level": { "type": "integer" },
                  "term": { "type": "string" }
                }
              },
              "Course": {
                "type": "object",
                "properties": {
                  "course_name": { "type": "string" }
                }
              },
              "LecturerProfile": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" },
                  "full_name_english": { "type": "string" }
                }
              }
            }
          }
        }
      },
      "Class": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_name": { "type": "string" },
          "dept_id": { "type": "integer", "nullable": true },
          "courses": {
            "type": "array",
            "items": { "type": "integer" },
            "description": "Array of course IDs assigned (serialized)"
          }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_id": { "type": "integer" },
          "name": { "type": "string", "description": "Group name (e.g., G1, G2)" },
          "num_of_student": { "type": "integer", "description": "Number of students in the group" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" }
        }
      },
      "CourseMapping": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "class_id": { "type": "integer" },
          "course_id": { "type": "integer" },
          "lecturer_id": { "type": "integer", "nullable": true },
          "hours": { "type": "number" }
        }
      },
      "LecturerProfile": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "user_id": { "type": "integer" },
          "bio": { "type": "string", "nullable": true },
          "status": { "type": "string" },
          "department": { "type": "string", "nullable": true }
        }
      },
      "OnboardingSubmission": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "user_id": { "type": "integer" },
          "status": { "type": "string" },
          "submitted_at": { "type": "string", "format": "date-time" }
        }
      },
      "PaginatedCandidates": {
        "type": "object",
        "properties": {
          "data": { "type": "array", "items": { "$ref": "#/components/schemas/Candidate" } },
          "page": { "type": "integer" },
          "limit": { "type": "integer" },
          "total": { "type": "integer" },
          "totalPages": { "type": "integer" },
          "hasMore": { "type": "boolean" }
        }
      },
      "DashboardStats": {
        "type": "object",
        "properties": {
          "totalCandidates": { "type": "integer" },
          "totalLecturers": { "type": "integer" }
        }
      },
      "Error": {
        "type": "object",
        "required": ["message"],
        "properties": {
          "message": { "type": "string" },
          "code": { "type": "string", "nullable": true },
          "details": { "type": "object", "nullable": true }
        }
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Not authorized" }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Access denied" }
          }
        }
      },
      "NotFound": {
        "description": "Not Found",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Resource not found" }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Invalid input" }
          }
        }
      },
      "Conflict": {
        "description": "Conflict",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Email already exists" }
          }
        }
      },
      "ServerError": {
        "description": "Server error",
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/Error" },
            "example": { "message": "Server error" }
          }
        }
      }
    }
  },
  "security": [{ "cookieAuth": [], "bearerAuth": [] }],
  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login and obtain JWT cookie",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string", "minLength": 6 }
                }
              },
              "example": { "email": "admin@cadt.edu.kh", "password": "secret123" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                },
                "example": {
                  "success": true,
                  "user": { "id": 1, "email": "admin@cadt.edu.kh", "role": "admin" }
                }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "Logout (clear JWT)",
        "responses": {
          "200": {
            "description": "Logged out",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Logged out successfully" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        }
      }
    },
    "/api/auth/check": {
      "get": {
        "tags": ["Auth"],
        "summary": "Check authentication status",
        "responses": {
          "200": {
            "description": "Auth status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "authenticated": { "type": "boolean" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                },
                "examples": {
                  "unauthenticated": {
                    "summary": "Not logged in",
                    "value": { "authenticated": false }
                  },
                  "authenticated": {
                    "summary": "Logged in",
                    "value": {
                      "authenticated": true,
                      "user": { "id": 1, "email": "admin@cadt.edu.kh", "role": "admin" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/candidates": {
      "get": {
        "tags": ["Candidates"],
        "summary": "List candidates (paginated)",
        "parameters": [
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 } }
        ],
        "responses": {
          "200": {
            "description": "Paginated candidates",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/PaginatedCandidates" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Candidates"],
        "summary": "Create candidate",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["fullName", "email"],
                "properties": {
                  "fullName": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "phone": { "type": "string" },
                  "positionAppliedFor": { "type": "string" },
                  "interviewDate": { "type": "string", "format": "date-time" }
                }
              },
              "example": {
                "fullName": "Jane Doe",
                "email": "jane@cadt.edu.kh",
                "positionAppliedFor": "Lecturer"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/candidates/{id}": {
      "patch": {
        "tags": ["Candidates"],
        "summary": "Update candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Candidate" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Candidates"],
        "summary": "Delete candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Candidate deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/interview-questions": {
      "get": {
        "tags": ["Interview"],
        "summary": "List interview questions grouped by category",
        "parameters": [
          {
            "name": "defaultOnly",
            "in": "query",
            "schema": { "type": "boolean" },
            "description": "Return only default (seeded) questions"
          }
        ],
        "responses": {
          "200": {
            "description": "Questions grouped by category",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "categories": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/InterviewQuestion" }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Interview"],
        "summary": "Add interview question",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["question_text", "category"],
                "properties": {
                  "question_text": { "type": "string" },
                  "category": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/InterviewQuestion" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/{id}": {
      "put": {
        "tags": ["Interview"],
        "summary": "Update interview question text",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["question_text"],
                "properties": { "question_text": { "type": "string" } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/InterviewQuestion" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/search": {
      "get": {
        "tags": ["Interview"],
        "summary": "Search interview questions",
        "parameters": [
          { "name": "query", "in": "query", "required": true, "schema": { "type": "string" } }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/InterviewQuestion" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/interview-questions/candidate-questions": {
      "post": {
        "tags": ["Interview"],
        "summary": "Add/update candidate response (rating or note)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["candidate_id", "question_id"],
                "properties": {
                  "candidate_id": { "type": "integer" },
                  "question_id": { "type": "integer" },
                  "rating": { "type": "number", "nullable": true },
                  "noted": { "type": "string", "nullable": true }
                }
              },
              "example": {
                "candidate_id": 5,
                "question_id": 12,
                "rating": 4,
                "noted": "Good explanation"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Saved",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CandidateQuestionResponse" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/candidates/{id}/interview-details": {
      "get": {
        "tags": ["Candidates"],
        "summary": "Full interview responses (ratings & notes) for candidate",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Interview responses (may be empty)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "candidate_id": { "type": "integer" },
                    "responses": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/CandidateQuestionResponse" }
                    }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturers": {
      "get": {
        "tags": ["Lecturers"],
        "summary": "List lecturers",
        "responses": {
          "200": {
            "description": "Lecturer profiles",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/LecturerProfile" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Lecturers"],
        "summary": "Create lecturer user",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/detail": {
      "get": {
        "tags": ["Lecturers"],
        "summary": "Get lecturer detail",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Detail",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/courses": {
      "put": {
        "tags": ["Lecturers"],
        "summary": "Update lecturer courses",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": { "courseIds": { "type": "array", "items": { "type": "integer" } } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/profile": {
      "patch": {
        "tags": ["Lecturers"],
        "summary": "Patch lecturer profile fields",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}": {
      "put": {
        "tags": ["Lecturers"],
        "summary": "Update lecturer user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Lecturers"],
        "summary": "Delete lecturer user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "User deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/{id}/status": {
      "patch": {
        "tags": ["Lecturers"],
        "summary": "Toggle lecturer status",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Status updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturer-profile/me": {
      "get": {
        "tags": ["LecturerProfile"],
        "summary": "Get my lecturer profile",
        "responses": {
          "200": {
            "description": "Profile",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "put": {
        "tags": ["LecturerProfile"],
        "summary": "Update my lecturer profile",
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturer-profile/me/files": {
      "post": {
        "tags": ["LecturerProfile"],
        "summary": "Upload CV/Syllabus files",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "cv": { "type": "string", "format": "binary" },
                  "syllabus": { "type": "string", "format": "binary" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Uploaded",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/LecturerProfile" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "413": { "description": "Payload too large" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/lecturers/onboarding/status": {
      "get": {
        "tags": ["Onboarding"],
        "summary": "Check my onboarding status",
        "responses": {
          "200": {
            "description": "Status",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/OnboardingSubmission" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/lecturers/onboarding": {
      "post": {
        "tags": ["Onboarding"],
        "summary": "Submit onboarding form & files",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "form": { "type": "string" },
                  "attachments": {
                    "type": "array",
                    "items": { "type": "string", "format": "binary" }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Submitted",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/OnboardingSubmission" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/catalog/departments": {
      "get": {
        "tags": ["Catalog"],
        "summary": "List departments",
        "responses": {
          "200": {
            "description": "Departments",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": { "id": { "type": "integer" }, "dept_name": { "type": "string" } }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/catalog/courses": {
      "get": {
        "tags": ["Catalog"],
        "summary": "List catalog courses",
        "responses": {
          "200": {
            "description": "Courses",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Course" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/courses": {
      "get": {
        "tags": ["Courses"],
        "summary": "List courses (paginated)",
        "parameters": [
          { "name": "page", "in": "query", "schema": { "type": "integer", "default": 1 } },
          { "name": "limit", "in": "query", "schema": { "type": "integer", "default": 10 } }
        ],
        "responses": {
          "200": {
            "description": "Paginated courses",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": { "type": "array", "items": { "$ref": "#/components/schemas/Course" } },
                    "page": { "type": "integer" },
                    "limit": { "type": "integer" },
                    "total": { "type": "integer" },
                    "totalPages": { "type": "integer" },
                    "hasMore": { "type": "boolean" },
                    "note": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Courses"],
        "summary": "Create course",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Course" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Course" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/courses/{id}": {
      "put": {
        "tags": ["Courses"],
        "summary": "Update course",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Course" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Course" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Courses"],
        "summary": "Delete course",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/classes": {
      "get": {
        "tags": ["Classes"],
        "summary": "List classes",
        "responses": {
          "200": {
            "description": "Classes",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Class" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Classes"],
        "summary": "Create class",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Class" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/classes/{id}": {
      "get": {
        "tags": ["Classes"],
        "summary": "Get class by id",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Class",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "put": {
        "tags": ["Classes"],
        "summary": "Update class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Class" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Classes"],
        "summary": "Delete class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/classes/{id}/courses": {
      "put": {
        "tags": ["Classes"],
        "summary": "Assign courses to class",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": { "courses": { "type": "array", "items": { "type": "integer" } } }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated class",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/Class" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/groups": {
      "get": {
        "tags": ["Groups"],
        "summary": "List all groups",
        "description": "Retrieves all groups with optional filtering by class name, department, or specialization",
        "parameters": [
          {
            "name": "class_name",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by class name"
          },
          {
            "name": "dept_name",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by department name"
          },
          {
            "name": "specialization",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by specialization name"
          }
        ],
        "responses": {
          "200": {
            "description": "List of groups",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "group": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Group" }
                    },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "group": [
                    {
                      "id": 1,
                      "class_id": 5,
                      "name": "G1",
                      "num_of_student": 30,
                      "Class": {
                        "name": "CS-Y4-A",
                        "Specialization": {
                          "name": "Computer Science",
                          "Department": { "dept_name": "Engineering" }
                        }
                      }
                    }
                  ],
                  "message": "Group retrieved successfully."
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Groups"],
        "summary": "Create a new group",
        "description": "Creates a new group for a specific class",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["class_id", "name", "num_of_student"],
                "properties": {
                  "class_id": {
                    "type": "integer",
                    "description": "ID of the class this group belongs to"
                  },
                  "name": {
                    "type": "string",
                    "description": "Group name (e.g., G1, G2, G3)"
                  },
                  "num_of_student": {
                    "type": "integer",
                    "description": "Number of students in the group"
                  }
                }
              },
              "example": {
                "class_id": 5,
                "name": "G1",
                "num_of_student": 30
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "group": { "$ref": "#/components/schemas/Group" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "group": {
                    "id": 1,
                    "class_id": 5,
                    "name": "G1",
                    "num_of_student": 30
                  },
                  "message": "Group created successfully."
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required field",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "missing_class_id": {
                    "summary": "Missing class_id",
                    "value": { "message": "Required class_id" }
                  },
                  "missing_name": {
                    "summary": "Missing name",
                    "value": { "message": "Required name" }
                  },
                  "missing_num_of_student": {
                    "summary": "Missing num_of_student",
                    "value": { "message": "Required num_of_student" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Class not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Class Model not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/groups/{id}": {
      "put": {
        "tags": ["Groups"],
        "summary": "Update a group",
        "description": "Updates an existing group's details",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Group ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["class_id", "name", "num_of_student"],
                "properties": {
                  "class_id": {
                    "type": "integer",
                    "description": "ID of the class this group belongs to"
                  },
                  "name": {
                    "type": "string",
                    "description": "Group name (e.g., G1, G2, G3)"
                  },
                  "num_of_student": {
                    "type": "integer",
                    "description": "Number of students in the group"
                  }
                }
              },
              "example": {
                "class_id": 5,
                "name": "G2",
                "num_of_student": 35
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Group updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "existingGroup": { "$ref": "#/components/schemas/Group" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "existingGroup": {
                    "id": 1,
                    "class_id": 5,
                    "name": "G2",
                    "num_of_student": 35
                  },
                  "message": "Group updated successfully."
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required field",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "missing_class_id": {
                    "summary": "Missing class_id",
                    "value": { "message": "Required class_id" }
                  },
                  "missing_name": {
                    "summary": "Missing name",
                    "value": { "message": "Required name" }
                  },
                  "missing_num_of_student": {
                    "summary": "Missing num_of_student",
                    "value": { "message": "Required num_of_student" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Group or class not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "examples": {
                  "group_not_found": {
                    "summary": "Group not found",
                    "value": { "message": "Group not found" }
                  },
                  "class_not_found": {
                    "summary": "Class not found",
                    "value": { "message": "Class Model not found" }
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Groups"],
        "summary": "Delete a group",
        "description": "Deletes an existing group",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Group ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Group deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Group deleted successfully." }
              }
            }
          },
          "404": {
            "description": "Group not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Group not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/course-mappings": {
      "get": {
        "tags": ["CourseMappings"],
        "summary": "List course mappings",
        "responses": {
          "200": {
            "description": "Mappings",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/CourseMapping" }
                }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["CourseMappings"],
        "summary": "Create mapping",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/course-mappings/{id}": {
      "put": {
        "tags": ["CourseMappings"],
        "summary": "Update mapping",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
          }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/CourseMapping" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["CourseMappings"],
        "summary": "Delete mapping",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/users": {
      "get": {
        "tags": ["Users"],
        "summary": "List users",
        "responses": {
          "200": {
            "description": "Users",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/User" } }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Users"],
        "summary": "Create user",
        "requestBody": {
          "required": true,
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/users/{id}": {
      "put": {
        "tags": ["Users"],
        "summary": "Update user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
        },
        "responses": {
          "200": {
            "description": "Updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "409": { "$ref": "#/components/responses/Conflict" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Delete user",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Deleted",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "User deleted" }
              }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/users/{id}/status": {
      "patch": {
        "tags": ["Users"],
        "summary": "Toggle user status",
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": {
          "200": {
            "description": "Status updated",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "404": { "$ref": "#/components/responses/NotFound" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/dashboard/stats": {
      "get": {
        "tags": ["Dashboard"],
        "summary": "Get dashboard statistics",
        "responses": {
          "200": {
            "description": "Stats",
            "content": {
              "application/json": { "schema": { "$ref": "#/components/schemas/DashboardStats" } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },

    "/api/profile/me": {
      "get": {
        "tags": ["Profile"],
        "summary": "Get my user profile",
        "responses": {
          "200": {
            "description": "Profile",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/User" } } }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/profile/activity": {
      "get": {
        "tags": ["Profile"],
        "summary": "Get my recent activity",
        "responses": {
          "200": {
            "description": "Activity list",
            "content": {
              "application/json": { "schema": { "type": "array", "items": { "type": "object" } } }
            }
          },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/profile/change-password": {
      "post": {
        "tags": ["Profile"],
        "summary": "Change my password",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["oldPassword", "newPassword"],
                "properties": {
                  "oldPassword": { "type": "string" },
                  "newPassword": { "type": "string", "minLength": 6 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed",
            "content": {
              "application/json": {
                "schema": { "type": "object", "properties": { "message": { "type": "string" } } },
                "example": { "message": "Password updated successfully" }
              }
            }
          },
          "400": { "$ref": "#/components/responses/ValidationError" },
          "401": { "$ref": "#/components/responses/Unauthorized" },
          "403": { "$ref": "#/components/responses/Forbidden" },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedules": {
      "get": {
        "tags": ["Schedule"],
        "summary": "Get all schedules (optionally filtered by department)",
        "parameters": [
          {
            "name": "class_name",
            "in": "query",
            "description": "Filter schedules by class name",
            "required": false,
            "schema": { "type": "string" },
            "example": "CS-Y4-A"
          },
          {
            "name": "dept_name",
            "in": "query",
            "description": "Filter schedules by department name",
            "required": false,
            "schema": { "type": "string" },
            "example": "Computer Science"
          },
          {
            "name": "specialization",
            "in": "query",
            "description": "Filter schedules by specialization",
            "required": false,
            "schema": { "type": "string" },
            "example": "Software Engineering"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule list retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Schedule" }
                    },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": [
                    {
                      "id": 1,
                      "day_of_week": "Monday",
                      "room": "A101",
                      "session_type": "Theory",
                      "notes": "Regular class",
                      "start_date": "2026-01-15",
                      "created_at": "2026-01-10T08:00:00Z",
                      "TimeSlot": { "label": "08h:00-09h:30" },
                      "CourseMapping": {
                        "id": 1,
                        "Course": { "course_name": "Web Development" },
                        "LecturerProfile": {
                          "title": "Dr",
                          "full_name_english": "John Smith"
                        },
                        "Group": {
                          "name": "G1",
                          "num_of_student": 30,
                          "Class": {
                            "name": "CS-Y4-A",
                            "academic_year": "2025-2026",
                            "year_level": "4",
                            "term": "1"
                          }
                        }
                      }
                    }
                  ],
                  "message": "Schedule retrieved successfully"
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "post": {
        "tags": ["Schedule"],
        "summary": "Create a new schedule",
        "description": "Creates a new schedule entry. The day and time slot must match the course mapping's availability. Automatically checks for conflicts and allows combined sessions (same course, lecturer, room, time but different groups).",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "course_mapping_id",
                  "time_slot_id",
                  "day_of_week",
                  "room",
                  "session_type",
                  "start_date"
                ],
                "properties": {
                  "course_mapping_id": {
                    "type": "integer",
                    "description": "ID of the course mapping"
                  },
                  "time_slot_id": {
                    "type": "integer",
                    "description": "ID of the time slot (must match an available session in the course mapping)"
                  },
                  "day_of_week": {
                    "type": "string",
                    "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                    "description": "Day of the week (must match an available day in the course mapping)"
                  },
                  "room": {
                    "type": "string",
                    "description": "Room number or name"
                  },
                  "session_type": {
                    "type": "string",
                    "enum": ["Theory", "Lab", "Lab + Theory"],
                    "description": "Type of session"
                  },
                  "start_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Start date of the schedule"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Additional notes (optional)"
                  }
                }
              },
              "example": {
                "course_mapping_id": 1,
                "time_slot_id": 2,
                "day_of_week": "Monday",
                "room": "A101",
                "session_type": "Theory",
                "start_date": "2026-02-01",
                "notes": "Combined session for G1 and G2"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Schedule created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/Schedule" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 5,
                    "course_mapping_id": 1,
                    "time_slot_id": 2,
                    "day_of_week": "Monday",
                    "room": "A101",
                    "session_type": "Theory",
                    "start_date": "2026-02-01",
                    "notes": "Combined session for G1 and G2"
                  },
                  "message": "Schedule created successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - missing required fields or schedule not in availability",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "availability": { "type": "string" },
                    "requested": {
                      "type": "object",
                      "properties": {
                        "day": { "type": "string" },
                        "time_slot": { "type": "string" }
                      }
                    },
                    "hint": { "type": "string" }
                  }
                },
                "examples": {
                  "missing_field": {
                    "summary": "Missing required field",
                    "value": { "message": "Required day_of_week" }
                  },
                  "not_in_availability": {
                    "summary": "Schedule not in availability",
                    "value": {
                      "message": "Invalid schedule: Friday at 08h:00-09h:30 is not in the course availability.",
                      "availability": "Monday: S1, S2; Wednesday: S3, S4, S5",
                      "requested": {
                        "day": "Friday",
                        "time_slot": "08h:00-09h:30"
                      },
                      "hint": "The schedule must match one of the sessions defined in the course mapping availability."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Course mapping not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Course mapping not found" }
              }
            }
          },
          "409": {
            "description": "Schedule conflict detected",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "conflict": {
                      "type": "object",
                      "properties": {
                        "day": { "type": "string" },
                        "time_slot_id": { "type": "integer" },
                        "room": { "type": "string" }
                      }
                    }
                  }
                },
                "example": {
                  "message": "Schedule conflict detected (class / lecturer / room)",
                  "conflict": {
                    "day": "Monday",
                    "time_slot_id": 2,
                    "room": "A101"
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    },
    "/api/schedules/{id}": {
      "put": {
        "tags": ["Schedule"],
        "summary": "Update an existing schedule",
        "description": "Updates schedule details. If updating day or time slot, they must match the course mapping's availability. Checks for conflicts when time/location changes, allowing combined sessions for different groups.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["day_of_week", "room", "session_type", "start_date"],
                "properties": {
                  "course_mapping_id": {
                    "type": "integer",
                    "description": "ID of the course mapping (optional)"
                  },
                  "time_slot_id": {
                    "type": "integer",
                    "description": "ID of the time slot (must match an available session if provided)"
                  },
                  "day_of_week": {
                    "type": "string",
                    "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                    "description": "Day of the week (must match an available day in the course mapping)"
                  },
                  "room": { "type": "string" },
                  "session_type": {
                    "type": "string",
                    "enum": ["Theory", "Lab", "Lab + Theory"]
                  },
                  "start_date": {
                    "type": "string",
                    "format": "date"
                  },
                  "notes": { "type": "string" }
                }
              },
              "example": {
                "day_of_week": "Tuesday",
                "room": "B202",
                "session_type": "Lab",
                "start_date": "2026-02-01",
                "notes": "Updated to new room"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Schedule updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "schedule": { "$ref": "#/components/schemas/Schedule" },
                    "message": { "type": "string" }
                  }
                },
                "example": {
                  "schedule": {
                    "id": 5,
                    "day_of_week": "Tuesday",
                    "room": "B202",
                    "session_type": "Lab"
                  },
                  "message": "Schedule updated successfully"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - schedule not in availability",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "availability": { "type": "string" },
                    "requested": {
                      "type": "object",
                      "properties": {
                        "day": { "type": "string" },
                        "time_slot": { "type": "string" }
                      }
                    },
                    "hint": { "type": "string" }
                  }
                },
                "example": {
                  "message": "Invalid schedule: Friday at 15h:30-17h:00 is not in the course availability.",
                  "availability": "Monday: S1, S2; Wednesday: S3, S4, S5",
                  "requested": {
                    "day": "Friday",
                    "time_slot": "15h:30-17h:00"
                  },
                  "hint": "The schedule must match one of the sessions defined in the course mapping availability."
                }
              }
            }
          },
          "404": {
            "description": "Schedule or course mapping not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "409": {
            "description": "Schedule conflict detected",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "conflict": { "type": "object" }
                  }
                },
                "example": {
                  "message": "Schedule conflict detected (class / lecturer / room)",
                  "conflict": {
                    "day": "Tuesday",
                    "time_slot_id": 2,
                    "room": "B202"
                  }
                }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      },
      "delete": {
        "tags": ["Schedule"],
        "summary": "Delete a schedule",
        "description": "Deletes an existing schedule entry",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "integer" },
            "description": "Schedule ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Schedule deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule deleted successfully" }
              }
            }
          },
          "404": {
            "description": "Schedule not found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": { "message": { "type": "string" } }
                },
                "example": { "message": "Schedule not found" }
              }
            }
          },
          "500": { "$ref": "#/components/responses/ServerError" }
        },
        "security": [{ "cookieAuth": [], "bearerAuth": [] }]
      }
    }
  }
}
